<!DOCTYPE html>
<html lang="hy">
  <head>
    <meta charset="utf-8" />
    <title>Գյումրու Պետական Տեխնիկական Քոլեջ</title>
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <%= csrf_meta_tags %>
    <%= csp_meta_tag %>

    <%= stylesheet_link_tag "application", "data-turbo-track": "reload" %>
    <%= javascript_include_tag "application", "data-turbo-track": "reload", defer: true %>
    <!-- preconnect for Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Serif+Armenian:wght@400;700&family=Noto+Sans+Armenian:wght@300;400;500;700&display=swap" rel="stylesheet">
  </head>

  <body class="gstc-body">
    <!-- Header (unchanged) -->
    <header class="site-header-modern">
      <nav class="navbar">
        <div class="nav-container">
          <div class="nav-brand">
            <%= link_to root_path, class: "brand-link" do %>
              <div class="logo-wrapper">
                <img src="/images/logo-placeholder.png" alt="GSTC logo" class="brand-logo-modern">
                <div class="logo-pulse" aria-hidden="true"></div>
              </div>
              <div class="brand-text">
                <span class="brand-title-modern">GSTC</span>
                <span class="brand-subtitle">Գյումրու Քոլեջ</span>
              </div>
            <% end %>
          </div>

          <div class="nav-menu" id="navMenu">
            <ul class="nav-list">
              <li class="nav-item"><%= link_to root_path, class: "nav-link #{'active' if current_page?(root_path)}" do %><span>Գլխավոր</span><% end %></li>
              <li class="nav-item"><%= link_to departments_path, class: "nav-link #{'active' if current_page?(departments_path)}" do %><span>Մասնագիտություններ</span><% end %></li>
              <li class="nav-item"><%= link_to about_path, class: "nav-link #{'active' if current_page?(about_path)}" do %><span>Մեր Մասին</span><% end %></li>

              <li class="nav-item">
                <% if defined?(student_life_path) %>
                  <%= link_to student_life_path, class: "nav-link #{'active' if current_page?(student_life_path)}" do %>
                    <span>Ուս. Կյանք</span>
                  <% end %>
                <% else %>
                  <a class="nav-link" href="#student-life"><span>Ուս. Կյանք</span></a>
                <% end %>
              </li>

              <li class="nav-item"><%= link_to admissions_path, class: "nav-link #{'active' if current_page?(admissions_path)}" do %><span>Ընդունելություն</span><% end %></li>
              <li class="nav-item"><a href="#contact" class="nav-link"><span>Կապ</span></a></li>
            </ul>

            <div class="nav-cta">
              <%= link_to admissions_path, class: "apply-button" do %>
                <span>Դիմել</span>
                <svg width="16" height="16" viewBox="0 0 16 16" fill="none" aria-hidden="true">
                  <path d="M6 12L10 8L6 4" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
              <% end %>
            </div>
          </div>

          <button class="mobile-menu-toggle" id="mobileMenuToggle" aria-expanded="false" aria-controls="navMenu" aria-label="Toggle navigation">
            <span class="hamburger" aria-hidden="true"></span>
            <span class="hamburger" aria-hidden="true"></span>
            <span class="hamburger" aria-hidden="true"></span>
          </button>
        </div>
      </nav>
      <!-- locale switcher (place near header / nav) -->
      <div class="locale-switcher" aria-label="Language switcher">
        <% begin %>
          <% Locale.enabled.each do |loc| %>
            <%= link_to loc.code.upcase,
                        switch_locale_url(loc.code),
                        class: "locale-button #{'active' if I18n.locale.to_s == loc.code}" %>
          <% end %>
        <% rescue => e %>
          <%# Fallback if DB is unavailable: use I18n.available_locales %>
          <% I18n.available_locales.each do |l| %>
            <%= link_to l.to_s.upcase,
                        switch_locale_url(l.to_s),
                        class: "locale-button #{'active' if I18n.locale.to_s == l.to_s}" %>
          <% end %>
        <% end %>
      </div>

    </header>

    <main class="site-main-modern">
      <%= yield %>
    </main>
    <%= render 'shared/train' %>

    <!-- Professional Footer -->
    <footer class="site-footer-modern" role="contentinfo">
      <div class="footer-top">
        <div class="container-modern">
          <div class="footer-grid">
            <!-- Column 1: Brand & blurb -->
            <div class="footer-col footer-about">
              <div class="footer-brand">
                <img src="/images/logo-placeholder.png" alt="GSTC logo" class="footer-logo">
                <div class="footer-brand-text">
                  <h3>Գյումրու Պետական Տեխնիկական Քոլեջ</h3>
                  <p class="footer-tagline">Կրթություն. Թիմ. Տեսլական.</p>
                </div>
              </div>
              <p class="footer-description">
                Առաքելություն՝ պատրաստել ժամանակակից տեխնիկա և ապահովել որակյալ, կիրառելի գիտելիքներ տարածաշրջանի համար։
              </p>

              <div class="social-links" aria-label="Social links">
                <a href="#" class="social-link" aria-label="Facebook">
                  <!-- Facebook svg (kept simple) -->
                  <svg width="18" height="18" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true"><path d="M20 10c0-5.523-4.477-10-10-10S0 4.477 0 10c0 4.991 3.657 9.128 8.438 9.878v-6.987h-2.54V10h2.54V7.797c0-2.506 1.492-3.89 3.777-3.89 1.094 0 2.238.195 2.238.195v2.46h-1.26c-1.243 0-1.63.771-1.63 1.562V10h2.773l-.443 2.891h-2.33v6.987C16.343 19.128 20 14.991 20 10z"/></svg>
                </a>
                <a href="#" class="social-link" aria-label="Instagram">
                  <svg width="18" height="18" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true"><path d="M10 0C7.284 0 6.944.012 5.877.06 4.813.11 4.086.278 3.45.525a4.897 4.897 0 00-1.772 1.153A4.902 4.902 0 00.525 3.45C.278 4.086.11 4.813.06 5.877.012 6.944 0 7.284 0 10s.012 3.056.06 4.123c.05 1.064.218 1.791.465 2.427.227.59.541 1.092 1.153 1.772.68.612 1.182.926 1.772 1.153.636.247 1.363.415 2.427.465C6.944 19.988 7.284 20 10 20s3.056-.012 4.123-.06c1.064-.05 1.791-.218 2.427-.465.59-.227 1.092-.541 1.772-1.153.612-.68.926-1.182 1.153-1.772.247-.636.415-1.363.465-2.427C19.988 13.056 20 12.716 20 10s-.012-3.056-.06-4.123c-.05-1.064-.218-1.791-.465-2.427-.227-.59-.541-1.092-1.153-1.772-.68-.612-1.182-.926-1.772-1.153-.636-.247-1.363-.415-2.427-.465C13.056.012 12.716 0 10 0z"/><path d="M10 13.333a3.333 3.333 0 110-6.666 3.333 3.333 0 010 6.666zM16.538 4.63a1.2 1.2 0 11-2.4 0 1.2 1.2 0 012.4 0z"/></svg>
                </a>
                <a href="#" class="social-link" aria-label="YouTube">
                  <svg width="18" height="18" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true"><path d="M19.615 5.481c-.23-.859-.907-1.535-1.766-1.766C16.288 3.333 10 3.333 10 3.333s-6.288 0-7.849.382c-.859.23-1.535.907-1.766 1.766C0 7.042 0 10.333 0 10.333s0 3.291.385 4.852c.23.859.907 1.535 1.766 1.766C3.712 16.667 10 16.667 10 16.667s6.288 0 7.849-.382c.859-.23 1.535-.907 1.766-1.766.385-1.561.385-4.852.385-4.852s0-3.291-.385-4.852zM8.333 12.5V8.167L11.667 10l-3.334 2.5z"/></svg>
                </a>
              </div>
            </div>

            <!-- Column 2: Quick links -->
            <nav class="footer-col footer-quick" aria-labelledby="footer-links-heading">
              <h4 id="footer-links-heading" class="footer-title">Արագ հղումներ</h4>
              <ul class="footer-list">
                <li><%= link_to "Գլխավոր", root_path %></li>
                <li><%= link_to "Մասնագիտություններ", departments_path %></li>
                <li><%= link_to "Մեր մասին", about_path %></li>
                <li>
                  <% if defined?(student_life_path) %>
                    <%= link_to "Ուսանողական կյանք", student_life_path %>
                  <% else %>
                    <a href="#student-life">Ուսանողական կյանք</a>
                  <% end %>
                </li>
                <li><%= link_to "Ընդունելություն", admissions_path %></li>
              </ul>
            </nav>

            <!-- Column 3: Contacts -->
            <address class="footer-col footer-contact" aria-labelledby="footer-contact-heading">
              <h4 id="footer-contact-heading" class="footer-title">Կապ</h4>
              <ul class="contact-list">
                <li><strong>Փողոց</strong><span>Վարդանանց 1, Գյումրի</span></li>
                <li><strong>Հեռ.</strong><a href="tel:+3743125XXXX">+374 (312) 5-XX-XX</a></li>
                <li><strong>Email</strong><a href="mailto:info@gstc.am">info@gstc.am</a></li>
              </ul>
            </address>

            <!-- Column 4: Newsletter -->
            <div class="footer-col footer-newsletter" aria-labelledby="footer-newsletter-heading">
              <h4 id="footer-newsletter-heading" class="footer-title">Բաժանորդագրություն</h4>
              <p class="newsletter-text">Ստացեք կարևոր հայտարարությունները և բացատրությունները Ձեր էլ. փոստով։</p>

              <% if defined?(subscriptions_path) %>
                <%= form_with url: subscriptions_path, method: :post, local: true, html: { class: 'newsletter-form' } do |f| %>
                  <div class="newsletter-controls">
                    <%= f.email_field :email, placeholder: "Ձեր էլ․ հասցեն", required: true, class: "newsletter-input" %>
                    <%= f.submit "Բաժանորդագրություն", class: "newsletter-submit" %>
                  </div>
                <% end %>
              <% else %>
                <form class="newsletter-form" action="#" method="post" onsubmit="alert('Սույն բաժանորդագրության վայրը դեռ սահմանված չէ՝ խնդրում ենք տեղափոխել ադմինին.'); return false;">
                  <div class="newsletter-controls">
                    <input type="email" name="email" placeholder="Ձեր էլ․ հասցեն" required class="newsletter-input" />
                    <button type="submit" class="newsletter-submit">Բաժանորդագրություն</button>
                  </div>
                </form>
              <% end %>
            </div>
          </div>
        </div>
      </div>

      <div class="footer-bottom">
        <div class="container-modern">
          <div class="footer-bottom-inner">
            <p class="copyright">&copy; <%= Time.current.year %> Գյումրու Պետական Տեխնիկական Քոլեջ. Բոլոր իրավունքները պաշտպանված են։</p>
            <div class="legal-links">
              <%= link_to "Գաղտնիություն", privacy_path if defined?(privacy_path) %>
              <%= link_to "Պայմանիք", terms_path if defined?(terms_path) %>
            </div>
          </div>
        </div>
      </div>

      <!-- Back to Top -->
      <button class="back-to-top" id="backToTop" aria-label="Back to top">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true">
          <path d="M12 19V5M5 12l7-7 7 7" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
      </button>
    </footer>

    <script>
      // Mobile Menu Toggle
      (function() {
        const mobileMenuToggle = document.getElementById('mobileMenuToggle');
        const navMenu = document.getElementById('navMenu');

        if (mobileMenuToggle && navMenu) {
          mobileMenuToggle.addEventListener('click', () => {
            const expanded = mobileMenuToggle.classList.toggle('active');
            mobileMenuToggle.setAttribute('aria-expanded', expanded);
            navMenu.classList.toggle('active');
          });
        }
      })();

      // Back to Top Button
      (function() {
        const backToTop = document.getElementById('backToTop');
        if (!backToTop) return;

        window.addEventListener('scroll', () => {
          if (window.pageYOffset > 300) {
            backToTop.classList.add('visible');
          } else {
            backToTop.classList.remove('visible');
          }
        });

        backToTop.addEventListener('click', () => {
          window.scrollTo({ top: 0, behavior: 'smooth' });
        });
      })();
    </script>
  </body>
</html>
